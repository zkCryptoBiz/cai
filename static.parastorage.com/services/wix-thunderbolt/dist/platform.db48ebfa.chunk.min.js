"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[2646,3169,5445,569],{33615:function(e,t,a){a.r(t),a.d(t,{ProtectedPagesApiSymbol:function(){return y},page:function(){return N},site:function(){return k}});var r,s=a(77748),o=a(20590),n=a(54563);!function(e){e.SM="SM",e.Pass="PASS",e.NONE="NONE"}(r||(r={}));const i=(0,s.Og)([(0,s.KT)(o._K,n.U),(0,s.KT)(o.YG,n.U),(0,s.KT)(o.wk,n.U)],((e,t,a)=>{const s=a=>{const s=e.pagesSecurity[a];return s&&s.requireLogin?r.SM:t.passwordProtected[a]||s&&s.passwordDigest?r.Pass:r.NONE};return{async handle(t){if(t.pageJsonFileName)return t;const o=t.pageId,{pagesMap:n,loginAndNavigate:i,authenticateUsingSitePassword:p,completedSitePasswordAuth:c}=a.get();if(n[o])return{...t,pageJsonFileName:n[o]};if(s("masterPage")===r.Pass&&!c)return p(t),null;const u=s(o);return u===r.NONE&&((e,t)=>{throw new Error(`we do not have authentication info for protected page ${e} page security: ${t}`)})(o,e.pagesSecurity[o]),i(t,u),null}}}));var p=a(71085),c=a(66397),u=a(19889),g=a(91994),d=a(12457),l=a(75396),P=a(32166),m=a(10553);const f=(0,s.Og)([(0,s.KT)(o.wk,n.U),(0,s.KT)(o.YG,n.U),(0,s.KT)(o._K,n.U),p.Ix,l.t7,(0,s.lq)(u.Np),(0,s.lq)(g.De),d.Tf,P.Ht,m.n],((e,{publicPageIds:t,pageUriSeoToRouterPrefix:a},{customNoPermissionsPageUriSeo:s,customNoPermissionsPageId:o},n,i,p,u,g,d,l)=>{const P=async(e,t)=>e===r.SM?(async()=>{let e;if(p)if(l["specs.thunderbolt.newAuthorizedPagesFlow"]){if(e=await p.requestAuthorizedPages(),e.success)return{authorizedPagesMap:e.pages,onProtectedPageNavigationComplete:async()=>{window.document.title=await g.getPageTitle()}}}else if(e=await p.requestAuthentication({}),e.success)return{authorizedPagesMap:await p.authorizeMemberPagesByToken(e.token)};return{authorizedPagesMap:{},authenticationResult:e}})():(async e=>u?u.promptPagePasswordDialog(e):{authorizedPagesMap:{}})(t),m=async(e,t,r=!1)=>{if(s&&r){const t=`${a[s]?`./${a[s]}/`:"./"}${s}`,r=encodeURIComponent(JSON.stringify({restrictedPageId:e.pageId,restrictedPagePath:(e.relativeEncodedUrl??"").replace("./","/")}));return n.navigate(`${t}?appSectionParams=${r}`)}if(p&&"SM"===t){const e=()=>{i.isLandingOnProtectedPage()&&n.navigate("./")};return p.showNoPermissionsToPageDialog(e),!1}return!!i.isLandingOnProtectedPage()&&n.navigate("./")};async function f(t){if(!u)return;const{authorizedPagesMap:a,onComplete:r}=await u.promptSitePasswordDialog();e.update((e=>({...e,pagesMap:Object.assign(e.pagesMap,a),completedSitePasswordAuth:!0}))),await n.navigate(t.parsedUrl.href),r?.()}const w=async(a,r)=>{const s=a.pageId;try{const{authorizedPagesMap:p,authenticationResult:u,onProtectedPageNavigationComplete:g}=await P(r,s);if(e.update((e=>({...e,pagesMap:Object.assign(e.pagesMap,p)}))),u?.reason===c.qd.CANCELED)return!!i.isLandingOnProtectedPage()&&n.navigate("./");if(p[s]){const e=await n.navigate(a.parsedUrl.href);return g?.(),e}{const s=t.includes(o),n=Boolean(e.get().pagesMap[o]);return m(a,r,s||n)}}catch(e){return d.captureError(e,{tags:{feature:"protectedPage"}}),m(a,r)}};return e.update((()=>({loginAndNavigate:w,authenticateUsingSitePassword:f,completedSitePasswordAuth:!1,pagesMap:{}}))),{appWillMount:async()=>{}}}));var w=a(16537),h=a(60950);const M=(0,s.Og)([(0,s.KT)(o.wk,n.U),u.Np],((e,t)=>({getTpaHandlers(){return{authorizeMemberPages:async()=>{const a=await t.authorizeMemberPagesByCookie();e.update((e=>({...e,pagesMap:{...e.pagesMap,...a}})))}}}})));const S=(0,s.Og)([(0,s.KT)(o.wk,n.U)],(function(e){return{getPageJsonFileName(t){return e.get()?.pagesMap[t]??null},getProtectedPages(){return{...e.get()?.pagesMap??{}}}}})),y=Symbol("ProtectedPagesApiSymbol"),k=e=>{e(p.po.Protected).to(i),e(w.$.AppWillMountHandler).to(f),e(y).to(S)},N=e=>{e(h.dQ).to(M)}},11682:function(e,t,a){a.r(t),a.d(t,{platformWorkerPromise:function(){return c}});const{viewerModel:{siteAssets:{clientTopology:r},siteFeatures:s,siteFeaturesConfigs:{platform:o},site:{externalBaseUrl:n}},usedPlatformApis:i}=window,p=Worker&&s.includes("platform"),c=p?(async()=>{const e="platform_create-worker started";performance.mark(e);const{clientWorkerUrl:t,appsScripts:a,bootstrapData:s,sdksStaticPaths:p}=o,{appsSpecData:c,appDefIdToIsMigratedToGetPlatformApi:u,forceEmptySdks:g}=s,d=t.startsWith("http://localhost:")||t.startsWith("https://bo.wix.com/suricate/")||document.baseURI!==location.href?(e=>{const t=new Blob([`importScripts('${e}');`],{type:"application/javascript"});return URL.createObjectURL(t)})(t):t.replace(r.fileRepoUrl,`${n}/_partials`),l=new Worker(d),P=Object.keys(a.urls).filter((e=>!c[e]?.isModuleFederated)).reduce(((e,t)=>(e[t]=a.urls[t],e)),{});if(p&&p.mainSdks&&p.nonMainSdks){Object.values(u).every((e=>e))||g?l.postMessage({type:"preloadNamespaces",namespaces:i}):l.postMessage({type:"preloadAllNamespaces",sdksStaticPaths:p})}l.postMessage({type:"platformScriptsToPreload",appScriptsUrls:P});const m="platform_create-worker ended";return performance.mark(m),performance.measure("Create Platform Web Worker",e,m),l})():Promise.resolve()}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/platform.db48ebfa.chunk.min.js.map